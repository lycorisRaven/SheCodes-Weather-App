<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="src/styles.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <div class="page">
        <div class="row">
          <div class="col section1">
            <div class="search-bar">
              <input id="search" class="search" type="search" />
              <input id="search-submit" class="submit" type="submit" />
            </div>
            <div class="current-info">
              <p id="current-city" class="current-city">London</p>
              <p id="current-temp" class="current-temperature">20°C</p>
              <p id="current-day" class="current-day">Monday</p>
              <p id="current-weather" class="current-weather">Partly Cloudy</p>
              <p id="current-humidity" class="current-humidity">
                Humidity: 60%
              </p>
              <p id="current-wind" class="current-wind">Wind: 5 km/h</p>
            </div>
          </div>
          <div class="col section2">
            <div class="city-buttons">
              <button class="city-btn">City 1</button>
              <button class="city-btn">City 2</button> <br />
              <button class="city-btn">City 3</button>
              <button class="city-btn">City 4</button>
            </div>
            <div class="alternative-forecasts">
              <button class="alternative-forecast">
                <p class="day-of-the-week">Tue</p>
                <p class="temperature">10°C</p>
              </button>
              <button class="alternative-forecast">
                <p class="day-of-the-week">Wed</p>
                <p class="temperature">10°C</p>
              </button>
              <button class="alternative-forecast">
                <p class="day-of-the-week">Thu</p>
                <p class="temperature">10°C</p>
              </button>
              <button class="alternative-forecast">
                <p class="day-of-the-week">Fri</p>
                <p class="temperature">10°C</p>
              </button>
              <button class="alternative-forecast">
                <p class="day-of-the-week">Sat</p>
                <p class="temperature">10°C</p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const currentCity = document.querySelector("#current-city");
      const currentTemp = document.querySelector("#current-temp");
      const currentDay = document.querySelector("#current-day");
      const currentWeather = document.querySelector("#current-weather");
      const currentHumidity = document.querySelector("#current-humidity");
      const currentWind = document.querySelector("#current-wind");

      const searchbar = document.querySelector("#search");
      const searchbutton = document.querySelector("#search-submit");

      const apikey = "8ca7dd4e61360b90fb66918853670e48";

      searchbutton.addEventListener("click", function () {
        let city = searchbar.value.replace(/\s/g, "");

        let apiurl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apikey}&units=metric`;
        axios.get(apiurl).then(function (response) {
          console.log("working");
          console.log(response.data);

          currentCity.innerHTML = response.data.name;
          currentTemp.innerHTML = response.data.main.temp + "°C";
          currentDay.innerHTML = getDayOfWeek(new Date());
          currentWeather.innerHTML = response.data.weather[0].description;
          currentHumidity.innerHTML =
            "Humidity: " + response.data.main.humidity + "%";
          currentWind.innerHTML = "Wind: " + response.data.wind.speed + " km/h";
        });
      });

      function getDayOfWeek(date) {
        const daysOfWeek = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        return daysOfWeek[date.getDay()];
      }
    </script>
  </body>
</html>
